#! /bin/sh  -x
#
# Change the value of ORACLE_HOME to specify the correct Oracle home
# directory for your installation.

ORACLE_HOME="{{ oracle_home }}"
#
# Change the value of ORACLE to the login name of the
# oracle owner at your site.
#
ORACLE="{{ oracle_user }}"

LOCKFILE=/var/lock/subsys/oracle
export ORACLE_HOME PATH

case $1 in
'start')
  if [ -f $LOCKFILE ]; then
     echo $0 already running.
     exit 1
  fi
  echo -n $"Starting Oracle Database ..."
  su - $ORACLE -c "$ORACLE_HOME/bin/lsnrctl start"
  su - $ORACLE -c "$ORACLE_HOME/bin/dbstart $ORACLE_HOME"
  touch $LOCKFILE
  ;;
'stop')
  if [ ! -f $LOCKFILE ]; then
     echo $0 already stopping.
     exit 1
  fi
  echo -n $"Stopping Oracle Database:"
  su - $ORACLE -c "$ORACLE_HOME/bin/lsnrctl stop"
  su - $ORACLE -c "$ORACLE_HOME/bin/dbshut $ORACLE_HOME"
  rm -f $LOCKFILE
  ;;
'restart')
   $0 stop
   $0 start
   ;;
*)
  echo "usage: $0 {start|stop|restart}"
  exit
  ;;
esac
#
exit
